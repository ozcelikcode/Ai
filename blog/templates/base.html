<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ site_settings.site_title if site_settings else 'AI Blog' }}{% endblock %}</title>
    <meta name="description" content="{% block description %}{{ site_settings.meta_description if site_settings else 'Modern AI destekli blog platformu' }}{% endblock %}">
    
    {% if site_settings and site_settings.favicon %}
    <link rel="icon" href="{{ site_settings.favicon }}" type="image/x-icon">
    {% endif %}
    
    {% if site_settings and site_settings.meta_keywords %}
    <meta name="keywords" content="{{ site_settings.meta_keywords }}">
    {% endif %}
    
    <!-- Modern Serif Font Family -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Domine:wght@400;500;600;700&family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&family=Lora:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Main CSS File -->
    <link rel="stylesheet" href="/static/css/main.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'heading': ['Domine', 'Times New Roman', 'serif'],
                        'content': ['Source Serif 4', 'Times New Roman', 'serif'], 
                        'elegant': ['Lora', 'Georgia', 'serif'],
                        'sans': ['system-ui', '-apple-system', 'sans-serif'],
                    },
                    colors: {
                        cream: {
                            50: '#fefdfb',
                            100: '#fdf8f0',
                            200: '#faf0e0',
                            300: '#f5e6c8',
                            400: '#efcd9e',
                            500: '#e7b474',
                            600: '#d89c4a',
                            700: '#c48832',
                            800: '#a06d2a',
                            900: '#825726',
                        },
                        brown: {
                            50: '#f7f3f0',
                            100: '#ede4db',
                            200: '#dbc5b7',
                            300: '#c7a088',
                            400: '#b67c5f',
                            500: '#a96142',
                            600: '#944f37',
                            700: '#7b4030',
                            800: '#64342b',
                            900: '#522c26',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-cream-50 text-brown-900 min-h-screen main-scrollbar">
    <nav class="bg-white/80 backdrop-blur-sm border-b border-cream-200 sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="/" class="flex items-center text-2xl font-bold text-brown-800 hover:text-brown-600 transition-smooth nav-logo">
                        {% if site_settings and site_settings.logo_type %}
                            {% if site_settings.logo_type == 'text' %}
                                <span>{{ site_settings.site_title or 'AI Blog' }}</span>
                            {% elif site_settings.logo_type == 'image' and site_settings.site_logo %}
                                <img src="{{ site_settings.site_logo }}" alt="{{ site_settings.site_title or 'AI Blog' }}" class="h-8 w-auto">
                            {% elif site_settings.logo_type == 'icon' and site_settings.logo_icon %}
                                <i data-lucide="{{ site_settings.logo_icon }}" class="w-8 h-8"></i>
                            {% elif site_settings.logo_type == 'icon_text' and site_settings.logo_icon %}
                                <i data-lucide="{{ site_settings.logo_icon }}" class="w-8 h-8 mr-2"></i>
                                <span>{{ site_settings.site_title or 'AI Blog' }}</span>
                            {% else %}
                                <span>{{ site_settings.site_title or 'AI Blog' }}</span>
                            {% endif %}
                        {% else %}
                            <span>AI Blog</span>
                        {% endif %}
                    </a>
                </div>
                
                <div class="hidden md:flex items-center space-x-1">
                    <!-- Temporarily disable dynamic navbar to fix the issue -->
                    {% set use_dynamic_navbar = false %}
                    {% if use_dynamic_navbar and site_settings and site_settings.navbar_config %}
                        {% set navbar_items = site_settings.navbar_config | from_json %}
                        {% for item in navbar_items %}
                            {% if item.text and item.link %}
                            <a href="{{ item.link }}" class="px-4 py-2 text-brown-700 hover:text-brown-900 hover:bg-brown-50 rounded-lg transition-smooth flex items-center space-x-2">
                                {% if item.icon %}
                                <i data-lucide="{{ item.icon }}" class="w-4 h-4"></i>
                                {% endif %}
                                <span>{{ item.text }}</span>
                            </a>
                            {% endif %}
                        {% endfor %}
                    {% else %}
                        <!-- Default navbar items -->
                        <a href="/" class="px-4 py-2 text-brown-700 hover:text-brown-900 hover:bg-brown-50 rounded-lg transition-smooth flex items-center space-x-2 nav-link">
                            <i data-lucide="home" class="w-4 h-4"></i>
                            <span>Ana Sayfa</span>
                        </a>
                        <a href="/categories" class="px-4 py-2 text-brown-700 hover:text-brown-900 hover:bg-brown-50 rounded-lg transition-smooth flex items-center space-x-2 nav-link">
                            <i data-lucide="folder" class="w-4 h-4"></i>
                            <span>Kategoriler</span>
                        </a>
                        <a href="/about" class="px-4 py-2 text-brown-700 hover:text-brown-900 hover:bg-brown-50 rounded-lg transition-smooth flex items-center space-x-2 nav-link">
                            <i data-lucide="info" class="w-4 h-4"></i>
                            <span>Hakkında</span>
                        </a>
                    {% endif %}
                </div>
                
                <div class="flex items-center space-x-4">
                    <!-- Search Toggle Button -->
                    <button id="search-toggle-btn" class="p-2 text-brown-700 hover:text-brown-900 transition-smooth relative">
                        <i data-lucide="search" class="w-5 h-5"></i>
                    </button>
                    
                    {% if current_user %}
                        <div class="flex items-center space-x-4">
                            {% if current_user.is_admin %}
                            <a href="/admin" class="text-brown-700 hover:text-brown-900 transition-smooth">
                                Admin Panel
                            </a>
                            {% endif %}
                            <div class="relative group">
                                <button class="flex items-center space-x-2 text-brown-700 hover:text-brown-900 transition-smooth">
                                    <div class="w-8 h-8 bg-brown-200 rounded-full flex items-center justify-center">
                                        {% if current_user.profile_image %}
                                        <img src="{{ current_user.profile_image }}" alt="{{ current_user.username }}" class="w-8 h-8 rounded-full object-cover">
                                        {% else %}
                                        <i data-lucide="user" class="w-4 h-4 text-brown-600"></i>
                                        {% endif %}
                                    </div>
                                    <span class="text-brown-700">{{ current_user.username }}</span>
                                    <i data-lucide="chevron-down" class="w-4 h-4"></i>
                                </button>
                                
                                <!-- Dropdown Menu -->
                                <div class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-cream-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                                    <div class="py-2">
                                        <a href="/profile/{{ current_user.username }}" class="block px-4 py-2 text-sm text-brown-700 hover:bg-cream-50 transition-smooth">
                                            <i data-lucide="user" class="w-4 h-4 inline mr-2"></i>
                                            Profil Sayfam
                                        </a>
                                        <a href="/settings" class="block px-4 py-2 text-sm text-brown-700 hover:bg-cream-50 transition-smooth">
                                            <i data-lucide="settings" class="w-4 h-4 inline mr-2"></i>
                                            Profil Ayarları
                                        </a>
                                        <div class="border-t border-cream-200 mt-2 pt-2">
                                            <a href="/logout" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-smooth">
                                                <i data-lucide="log-out" class="w-4 h-4 inline mr-2"></i>
                                                Çıkış Yap
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <div class="flex items-center space-x-2">
                            <a href="/login" class="text-brown-700 hover:text-brown-900 transition-smooth">
                                Giriş Yap
                            </a>
                            <a href="/register" class="bg-brown-600 text-white px-4 py-2 rounded-lg hover:bg-brown-700 transition-smooth">
                                Kayıt Ol
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <!-- Expandable Search Bar -->
        <div id="search-bar" class="hidden border-t border-cream-200 bg-white/95 backdrop-blur-sm">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                <form action="/search" method="get" class="relative max-w-2xl mx-auto">
                    <div class="relative">
                        <input type="text" 
                               name="q" 
                               id="navbar-search-input"
                               placeholder="Ne aramak istiyorsunuz? (Ctrl+K ile aç)"
                               class="w-full px-6 py-3 pr-12 text-lg border border-cream-300 rounded-xl focus:ring-2 focus:ring-brown-500 focus:border-brown-500 bg-white/90"
                               autocomplete="off">
                        <button type="submit" 
                                class="absolute right-3 top-1/2 transform -translate-y-1/2 p-2 text-brown-600 hover:text-brown-800 transition-smooth">
                            <i data-lucide="search" class="w-5 h-5"></i>
                        </button>
                    </div>
                    
                    <!-- Quick suggestions -->
                    <div id="navbar-search-suggestions" class="hidden absolute top-full left-0 right-0 bg-white border border-cream-200 rounded-lg shadow-lg mt-1 max-h-60 overflow-y-auto z-50">
                        <!-- Suggestions will be populated here -->
                    </div>
                    
                    <!-- Quick actions -->
                    <div class="flex items-center justify-between mt-3 text-sm text-brown-600">
                        <div class="flex items-center space-x-4">
                            <a href="/search" class="hover:text-brown-800 transition-smooth">
                                <i data-lucide="arrow-right" class="w-4 h-4 inline mr-1"></i>
                                Gelişmiş Arama
                            </a>
                        </div>
                        <button type="button" id="close-search" class="hover:text-brown-800 transition-smooth">
                            <i data-lucide="x" class="w-4 h-4 inline mr-1"></i>
                            Kapat
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </nav>

    <main>
        {% block content %}{% endblock %}
    </main>

    <footer class="bg-brown-800 text-cream-100 mt-16 font-content">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            {% if site_settings and (site_settings.footer_column_1 or site_settings.footer_column_2 or site_settings.footer_column_3) %}
                <!-- Custom Footer Columns -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    {% set column_order = site_settings.footer_column_order.split(',') if site_settings.footer_column_order 
                                         else ['1', '2', '3'] %}
                    
                    {% for column_num in column_order %}
                        <div>
                            {% if column_num == '1' and site_settings.footer_column_1 %}
                                {{ site_settings.footer_column_1|safe }}
                            {% elif column_num == '2' and site_settings.footer_column_2 %}
                                {{ site_settings.footer_column_2|safe }}
                            {% elif column_num == '3' and site_settings.footer_column_3 %}
                                {{ site_settings.footer_column_3|safe }}
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <!-- Default Footer Content -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div>
                        <h4 class="font-semibold mb-4 font-heading">Hızlı Linkler</h4>
                        <ul class="space-y-2">
                            <li><a href="/" class="text-cream-300 hover:text-white transition-smooth">Ana Sayfa</a></li>
                            <li><a href="/categories" class="text-cream-300 hover:text-white transition-smooth">Kategoriler</a></li>
                            <li><a href="/about" class="text-cream-300 hover:text-white transition-smooth">Hakkında</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-4 font-heading">İletişim</h4>
                        <ul class="space-y-2">
                            <li><a href="/contact" class="text-cream-300 hover:text-white transition-smooth">İletişim</a></li>
                            <li><a href="/privacy" class="text-cream-300 hover:text-white transition-smooth">Gizlilik</a></li>
                            <li><a href="/terms" class="text-cream-300 hover:text-white transition-smooth">Kullanım Şartları</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-4 font-heading">Sosyal Medya</h4>
                        <div class="flex space-x-3">
                            <a href="#" class="text-cream-300 hover:text-white transition-smooth">
                                <i data-lucide="twitter" class="w-5 h-5"></i>
                            </a>
                            <a href="#" class="text-cream-300 hover:text-white transition-smooth">
                                <i data-lucide="facebook" class="w-5 h-5"></i>
                            </a>
                            <a href="#" class="text-cream-300 hover:text-white transition-smooth">
                                <i data-lucide="instagram" class="w-5 h-5"></i>
                            </a>
                        </div>
                    </div>
                </div>
            {% endif %}
            
            <!-- Copyright Notice -->
            <div class="border-t border-brown-700 mt-8 pt-8 text-center text-cream-300">
                <p>
                    {% if site_settings and site_settings.footer_copyright %}
                        {{ site_settings.footer_copyright }}
                    {% else %}
                        &copy; 2024 {{ site_settings.site_title if site_settings else 'AI Blog' }}. Tüm hakları saklıdır.
                    {% endif %}
                </p>
            </div>
        </div>
    </footer>

    <!-- JavaScript Files -->
    <script src="/static/js/main.js"></script>
</body>
</html>